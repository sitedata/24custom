jQuery(function(e){"use strict";function t(){var t=e("<p />").attr("id","calc_shipping_kota_field").addClass("form-row form-row-wide").append("<span />").css("clear","both"),a=e("<select />").attr({name:"calc_shipping_kota",id:"calc_shipping_kota",placeholder:agenwebsite_woocommerce_jne_params.i18n_placeholder_kota});return a.html('<option value="">'+agenwebsite_woocommerce_jne_params.i18n_placeholder_kecamatan+"</option>"),t.append(a),t}if("undefined"==typeof agenwebsite_woocommerce_jne_params)return!1;var a={formatNoMatches:function(){return agenwebsite_woocommerce_jne_params.i18n_no_matches},placeholderOption:"first"},i={width:"100%"};e(document).ready(function(){"cart"===agenwebsite_woocommerce_jne_params.page&&(e(e("#calc_shipping_state").parent().parent()).after(t),e().select2?(e("select.country_to_state").select2(a),e("select#calc_shipping_state").select2(a)):e().chosen&&(e("select.country_to_state").chosen(i),e("select#calc_shipping_state").chosen(i))),("billing"===agenwebsite_woocommerce_jne_params.page||"shipping"===agenwebsite_woocommerce_jne_params.page)&&e("#billing_state, #shipping_state, #calc_shipping_state").change(),agenwebsite_woocommerce_jne_params.wc_version.split(".")[1]<3&&e("#billing_state, #shipping_state, #calc_shipping_state").change()}),e("body").bind("updated_shipping_method",function(){"cart"===agenwebsite_woocommerce_jne_params.page&&(e(e("#calc_shipping_state").parent().parent()).after(t),e().select2&&(e("select.country_to_state").select2(a),e("select#calc_shipping_state").select2(a)),e("#calc_shipping_state").change())}),e("body").on("change","#billing_state, #shipping_state, #calc_shipping_state",function(){var t,n,c,o=e("select.country_to_state, input.country_to_state").val(),s=e(this).find("option:selected").text(),l={action:"woocommerce_jne_shipping_get_kota",provinsi:s,_wpnonce:agenwebsite_woocommerce_jne_params._wpnonce},p=e(this).attr("id");switch(p){case"billing_state":t=e("#billing_kota"),n=e("#billing_city");break;case"shipping_state":t=e("#shipping_kota"),n=e("#shipping_city");break;case"calc_shipping_state":t=e("#calc_shipping_kota"),n=e("#calc_shipping_city");break;default:return!1}if("undefined"!=typeof n.attr("value")&&n.attr("value")!==!1&&n.attr("value").indexOf(",")>=0&&(c=n.attr("value").split(", ")[1]),"ID"===o){t.parent().show(),t.attr("disabled",!0),n.attr("disabled",!0),t.html('<option value="">'+agenwebsite_woocommerce_jne_params.i18n_loading_data+"</option>");var _=t.find("option:eq(1)").val();e().select2?t.select2().select2("val",_):e().chosen&&t.val(_).trigger("chosen:updated"),n.is("select")&&(n.html('<option value="">'+agenwebsite_woocommerce_jne_params.i18n_loading_data+"</option>"),e().select2?n.select2().select2("val",_):e().chosen&&n.val(_).trigger("chosen:updated")),e.post(agenwebsite_woocommerce_jne_params.ajax_url,l,function(n){var o;e.each(n,function(e,t){o+=t===c?'<option value="'+t+'" selected="selected">'+t+"</option>":'<option value="'+t+'">'+t+"</option>"}),t.html('<option value="">'+agenwebsite_woocommerce_jne_params.i18n_placeholder_kota+"</option>"+o),t.removeAttr("disabled"),e().select2?t.select2(a):e().chosen&&(t.chosen(i),t.trigger("chosen:updated")),t.change()})}else t.change(),t.parent().hide()}),e("body").on("change","#billing_kota, #shipping_kota, #calc_shipping_kota",function(){var t,n,c,o=e("select.country_to_state, input.country_to_state").val(),s=e(this).closest("div").find("#billing_state option:selected, #shipping_state option:selected, #calc_shipping_state option:selected"),l=e(this).find("option:selected"),p={action:"woocommerce_jne_shipping_get_kecamatan",provinsi:s.text(),kota:l.text(),_wpnonce:agenwebsite_woocommerce_jne_params._wpnonce},_=agenwebsite_woocommerce_jne_params.i18n_placeholder_kecamatan,r=agenwebsite_woocommerce_jne_params.i18n_label_kecamatan,d=' <abbr class="required" title="'+agenwebsite_woocommerce_jne_params.i18n_required_text+'">*</abbr>',h=e(this).attr("id");switch(h){case"billing_kota":t=e("#billing_city");break;case"shipping_kota":t=e("#shipping_city");break;case"calc_shipping_kota":t=e("#calc_shipping_city");break;default:return!1}if(n={name:t.attr("name"),id:t.attr("id"),placeholder:t.attr("placeholder"),label:t.parent().find("label"),value:t.attr("value")},"undefined"!=typeof n.value&&n.value!==!1&&n.value.indexOf(",")>=0&&(c=n.value.split(", ")[0]),"ID"===o){if(n.label.html(r+d),t.attr("disabled",!0),t.is("select")){t.html('<option value="">'+agenwebsite_woocommerce_jne_params.i18n_loading_data+"</option>");var g=t.find("option:eq(1)").val();e().select2?t.select2().select2("val",g):e().chosen&&t.val(g).trigger("chosen:updated")}e.post(agenwebsite_woocommerce_jne_params.ajax_url,p,function(o){var s="";e.each(o,function(e,t){s+=t===c?'<option value="'+t+", "+l.text()+'" selected="selected">'+t+"</option>":'<option value="'+t+", "+l.text()+'">'+t+"</option>"}),t.is("input")&&(t.replaceWith(e("<select />").attr({name:n.name,id:n.id,placeholder:_}).addClass("city_select")),t=e("#billing_kota, #shipping_kota, #calc_shipping_kota").closest("div").find("select#billing_city, select#shipping_city, select#calc_shipping_city")),t.html('<option value="">'+_+"</option>"+s),t.removeAttr("disabled"),e().select2?t.select2(a):e().chosen&&(t.chosen(i),t.trigger("chosen:updated"))})}else t.is("select")&&("calc_shipping_city"!==n.id&&t.parent().show().find(".chosen-container, .select2-container").remove(),t.replaceWith('<input type="text" class="input-text" name="'+n.name+'" id="'+n.id+'" placeholder="'+n.placeholder+'" />'))}),e("body").on("change","select.country_to_state, input.country_to_state",function(){var t,a,i,n,c=e(this).val(),o=e(this).attr("id");switch(o){case"billing_country":t=e("#billing_kota"),i=e("#billing_city");break;case"shipping_country":t=e("#shipping_kota"),i=e("#shipping_city");break;case"calc_shipping_country":t=e("#calc_shipping_kota"),i=e("#calc_shipping_city");break;default:return!1}n={name:i.attr("name"),id:i.attr("id"),placeholder:i.attr("placeholder")},"ID"!==c&&(a=t.parent(),a.hide(),a.removeClass("form-row form-row-wide").addClass("woocommerce-validated"),t.find("option").attr("value","default"),i.is("select")&&(i.parent().show().find(".chosen-container, .select2-container").remove(),i.replaceWith('<input type="text" class="input-text" name="'+n.name+'" id="'+n.id+'" placeholder="'+n.placeholder+'" />')))})});